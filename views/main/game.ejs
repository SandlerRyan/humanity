<% layout('../mainLayout') -%>

<script src="/socket.io/socket.io.js"></script>
<script>
// pass variables from back end to game.js using ejs
var room = <%= room %>;
var user = <%- JSON.stringify(user) %>;
</script>
<script src="/js/game.js"></script>
<!-- for the pre-game waiting phase -->

<div id="start">
</div>

<div id="show-players">
   <!-- Players table goes here via Underscore templates-->
</div>

<!-- once game starts -->
<div id="show-game">
   <!-- Game module for players goes here via Underscore templates-->
   

   <div id="top-cards" style="display: none;">
      <div class="card-pane">
         <div class="" style="text-align: center;">
            
            <span id="black-card-panel">
            </span>
            
            <div class="card white chosenCard" id="">
               <div class="card-content" style="text-align: left;">
               </div>
            </div>
            <div class="" style="text-align: center;">
               <a href="#" id="confirmButton" class="btn btn-primary">Confirm</a>
            </div>
         </div>
      </div>
   <div>

   
   <div id="cards-panel">
      <!-- Show Player Specific cards here -->
   </div>
   <div id="judge-panel">
      <!-- Show Judge Specific cards here and hide the cards-panel -->
   </div>
</div>

<br/>

<script id="tmpl-players" type="text/template">
   <h2 id="waiting-header">Waiting for Players</h2>
   <table class = "table table-hover centered-tbl">
      <thead>
         <tr>
            <th>Players</th>
         </tr>
      </thead>
      <tbody>
         {[ _.each(players, function(player) { ]}
            <tr>
               <td>
                  <div class="media">
                     <a href="#" class="pull-left">
                     <img src="{{player.image_url}}" class="img-circle img-small">
                     </a>
                     <div class="media-body">
                        <br/>
                        <p>
                        <h4>{{ player.first }}</h4>
                        </p>
                     </div>
                  </div>
               </td>
            </tr>
         {[ },this); ]}

      </tbody>
</table>
</script>

<script id="tmpl-game-top-card" type="text/template">

   <!-- Top Card Pane -->
   <div class="card black">
         <div class="card-content" style="text-align: left;">
               <p>{{ black_card.content }}</p>
         </div>
   </div>
</script>
<script id="tmpl-game-bottom-card" type="text/template">

   <!-- Bottom Card Pane -->
   <div class="card-pane" style="background: #000;">
      <div class="row" id="bottom-cards-container">

         {[ _.each(white_cards, function(card) { ]}
         <div class="card white useCard" id="{{ card.id }}">
              <div class="card-content">
                  <p>
                     {{ card.content }}
                  </p>
              </div>
         </div>
         {[ },this); ]}
      </div>
   </div>
</script>

<script id="tmpl-game-judge" type="text/template">

   <!-- Bottom Card Pane -->
   <div class="card-pane" style="background: #000;">
      
      <div class="row">
         <div id="submitted-cards">
            <p> You are a judge this round. Cards will show at the bottom </p>
            <!-- Inject new cards as they come here-->
         </div>
      </div>
   </div>
 

</script>

<script id="tmpl-game-single-card" type="text/template">

   <!-- Single Card View -->
   <div class="card white useCard" id="{{ card.id }}">
        <div class="card-content">
            <p>
               {{ card.content }}
            </p>
        </div>
   </div>
 
</script>