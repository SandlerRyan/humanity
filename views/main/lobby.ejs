<% layout('../mainLayout') -%>

<h1 class="centered-heading">Game Lobby</h1>
Enter your user id:<input type="text" id="user_id"/>

<br/>
<input type="button" value="Create Game" id="create"/>

<br/>
Below is a list of games:



<table class="table table-striped table-bordered centered-table">
   <thead>
      <tr>
         <th>Game Id</th>
         <th>Action</th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>123</td>
         <td><button type="button" class="btn btn-primary">Join!</button></td>
      </tr>
      <tr>
         <td>456</td>
         <td><button type="button" class="btn btn-primary">Join!</button></td>
      </tr>
      <tr>
         <td>789</td>
         <td><button type="button" class="btn btn-primary">Join!</button></td>
      </tr>
   </tbody>
</table>

<script>
var socket = io.connect('http://localhost/lobby', {
	port: 3000,
	transports: ["websocket"],
	'sync disconnect on unload': true});

// tell the server a new player has joined
socket.on('connect', function() {
	console.log("client connected");
});

socket.on('games', function (data) {
	// display the games in the table

	console.log(data)

});


$('#create').on('click', function() {
	var user_id = $('#user_id');
	if(user_id.val() == '') {
		alert('Please enter a valid user id');
	}
	else {
		window.location.href = '/create/' + user_id.val()
	}
});
</script>
